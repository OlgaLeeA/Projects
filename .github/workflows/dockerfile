# Use an official Python runtime as a parent image
FROM python:3.9

# Update the package index and install necessary dependencies
RUN apt-get update && \
    apt-get install -y sshpass openssh-client

# Install Ansible using pip
RUN pip install --upgrade pip && \
    pip install ansible

# Set up the SSH agent
RUN mkdir -p /root/.ssh && \
    chmod 700 /root/.ssh && \
    eval $(ssh-agent -s) && \
    ssh-add /root/.ssh/id_rsa

# Set the working directory for the container
WORKDIR /ansible

# Show the Ansible version as the default command
CMD [ "ansible", "--version" ]

